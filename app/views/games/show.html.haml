/ %p#notice= notice

.row-fluid
  .well
    %p
      = @game.location
    %p
      = @game.time.strftime("%H:%M") +' '+ @game.date.to_s
    %p
      = link_to 'Send an email', email_form_game_path(@game), remote: true, class: 'btn'
.row-fluid.row-fluid
  .span3
    %table.table.table-striped
      %thead
        %tr
          %th 
            .btn.btn-success
              Selected
          %th 
      %tbody
        - @game.game_players.selected.each do |assoc|
          %tr
            %td
              = assoc.player.name
            %td
              = link_to '->', game_game_player_change_status_url(assoc.game, assoc, status: :available), {:class => 'btn btn-primary btn-mini'}
  .span3
    %table.table.table-striped
      %thead
        %tr
          %th 
            .btn.btn-primary
              Available
          %th 
      %tbody
        - @game.game_players.available.each do |assoc|
          %tr
            %td
              = assoc.player.name
            %td 
              = link_to '<-', game_game_player_change_status_url(assoc.game, assoc, status: :selected), {:class => 'btn btn-success btn-mini'}
              = link_to '->', game_game_player_change_status_url(assoc.game, assoc, status: :unavailable), {:class => 'btn btn-danger btn-mini'}
  .span3
    %table.table.table-striped
      %thead
        %tr
          %th 
            .btn.btn-danger
              Unavailable
          %th
      %tbody
        - @game.game_players.unavailable.each do |assoc|
          %tr
            %td
              = assoc.player.name
            %td
              = link_to '<-', game_game_player_change_status_url(assoc.game, assoc, status: :available), {:class => 'btn btn-primary btn-mini'}
  .span3
    / = link_to 'Get from gmail contacts', GmailContacts::Google.authentication_url(gmail_game_players_url(@game))
    %table.table.table-striped.players-list
      %thead
        %tr
          %th 
            = link_to 'Invited', '#', class: 'btn'
            = link_to 'Add player', new_game_player_path(@game), remote: true, class: 'btn' 
      %tbody
        - @game.game_players.invited.each do |assoc|
          = render partial: 'players/player', locals: {gameplayer: assoc}
    
.row
  .span3.pull-right
    / = link_to 'Send invites', send_invites_game_path(@game), method: :post, class: 'btn'

  - if user_signed_in?
    = simple_form_for :group, url: add_from_group_game_path(@game) do |f|
      = f.input :group_id, as: :select, collection: current_user.groups, include_blank: false, label: 'Add from group:'
      = f.submit 'Add'
  - if user_signed_in? && @game.players.any?
    = link_to 'Add players to new group', new_group_path(game_id: @game.id), class: 'btn'
%br
= link_to 'Edit', edit_game_path(@game)
\|
= link_to 'Back', games_path
